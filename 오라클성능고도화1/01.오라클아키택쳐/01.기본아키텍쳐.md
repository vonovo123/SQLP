DBMS 내부 아키택처와 SQL 옵티마이저의 원리를 이해해야 고성능 DB 애플리케이션을 구축할 수 있다.

오라클은 데이터베이스와 이를 엑세스하는 프로세스 사이에 메모리 캐시 영역(SGA)를 두고 있다.

디스크를 경유하는 입출력은 물리적인 도구인 엑세스 암을 움직이며 헤드를 통해 데이터를 읽고 쓴다.

반면, 메모리 케시를 경유하느 입출력은 전기적 신호이기에 디스크 입출력 보다 훨씬 빠르다.

DBMS는 여러 프로세스가 동시에 데이터를 액세스할 수 있도록 사용자 데이터를 보호하는 LOCK 과 SGA에 저장된 데이터 구조에 대한 엑세스를 직렬화 하기 위한 LOCK 메커니즘을 제공한다.

SGA에 저장된 데이터 구조에 대한 엑세스를 직렬화 하는 것을 LACTH 라고 한다.

오라클 DBMS는 데이터를 블록 단위로 읽고, 저장할 때도 변경이 발생한 블록에 블록 단위로 저장한다.

전체 데이터를 읽고 쓰는 것을 방지하기위해 DBWR와 CKPT 프로세스가 캐시와 데이파일 간 동기화를 주기적으로 수행한다.

오라클에서는 디스크에 저장된 데이터 집합(Datafile, Redo log, Control File)을 데이터베이스라고 한다.

SGA와 통신하는 다양한 프로세스가 있다. 크게 서버 프로세스와 백그라운드 프로세스로 나뉜다.

서버 프로세스는 전면에서 사용자가 던지는 명령어를 처리한다.

백그라운드 프로세스는 DBMS 관리를 위한 각자의 역할을 수행한다.

DBMS는 각각의 클라이언트를 위한 서버프로세스를 제공한다. 서버프로세스는 SQL을 파싱하고 최적하를 수행하며 커서를 열어 SQL을 실행하면서 블록을 읽고 정렬하여

클라이언트가 요청한 결과집합을 만들어 DBMS로 전송하는 역할을 한다.

캐싱, FREE BLOCK 확보, 로그버퍼 비우기 등은 백그라운드 프로세스가 처리한다.

리스너에 클라이언트의 연결요청이 들어오면 생성된 서버프로세스에 PGA 메모리를 할당합니다.

생성된 커낵션은 클라이언트가 작업을 완료하더라도 해제하지 않고 WAS에서 풀링하고있다가 재사용합니다.

기본적인 구성에서는 하나의 데이터베이스에 접근하는 하나의 인스턴스(PGA와 서버프로세스의 집합)가 생성되지만 RAC 환경에서는 하나의 데이터베이스르 엑세스하는

다중 인스턴스로 구성된다.

RAC 환경에서는 글로벌 캐시 개념을 사용하여 로컬 케시에 ㅇ벗는 데이ㅓ 블록을 이웃 노드에서 전송받아 서비스 할 수 있다. Dirty 버퍼 또한 네트워크를 통해 서로 주고받으며 갱신을 수행한다.

이전 OPS환경에서는 타노드에 캐싱된 Dirty 버퍼를 읽으려면 디스크로의 쓰기 작업이 선행되어야 했고, 이를 Ping이라고 불렀다.

어떤 환경에서도 하나의 인스턴스가 여러 개의 데이터 베이스를 엑세스하는 것은 불가능 하다.
